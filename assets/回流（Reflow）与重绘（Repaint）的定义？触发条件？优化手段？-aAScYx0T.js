const n="### 33. 回流（Reflow）与重绘（Repaint）的定义？触发条件？优化手段？\n\n**答案**：\n\n#### 定义：\n\n- **回流（Reflow/Layout）**：浏览器重新计算元素的几何属性（位置 / 大小）并重新布局的过程，是性能开销最大的渲染步骤；\n- **重绘（Repaint/Paint）**：元素几何属性未变，仅样式（颜色 / 背景 / 阴影）变化，浏览器重新绘制元素的过程，开销小于回流。\n\n#### 触发回流的条件（修改元素几何属性 / 布局）：\n\n1. 调整窗口大小（resize）；\n2. 滚动页面；\n3. 修改元素宽高 / 边距 / 内边距 / 边框；\n4. 添加 / 删除 DOM 元素；\n5. 修改元素 `position`/`float`/`display`；\n6. 修改 `font-size`/`line-height`（影响文字布局）；\n7. 查询 `offsetWidth`/`offsetHeight`/`getComputedStyle`（强制浏览器回流获取最新值）。\n\n#### 触发重绘的条件（仅修改视觉样式，不影响布局）：\n\n1. 修改元素 `color`/`background`/`border-color`；\n2. 修改 `box-shadow`/`text-shadow`；\n3. 修改 `opacity`（未触发层叠上下文时）；\n4. 修改 `outline`/`visibility`。\n\n#### 优化手段：\n\n##### 1. 减少回流 / 重绘次数：\n\n- 批量修改样式：通过 class 切换样式，而非逐个修改属性；\n- js\n\n```javascript\n// 差：多次触发回流\nel.style.width = '100px';\nel.style.height = '100px';// 优：一次触发回流\nel.classList.add('box-size');\n```\n\n- 离线修改 DOM：将元素从 DOM 树移除（`display: none`），修改后重新插入；或使用 `DocumentFragment` 批量添加 DOM；\n- 避免频繁查询布局属性：缓存 `offsetWidth`/`offsetHeight` 等值，避免重复查询。\n\n##### 2. 避免触发回流的操作：\n\n- 优先使用 `transform`/`opacity` 修改元素位置 / 透明度（仅触发合成，无回流 / 重绘）；\n- 减少使用 `table` 布局（table 修改会触发整个表格回流）；\n- 避免频繁修改 `float`/`position` 属性。\n\n##### 3. 优化渲染性能：\n\n- 使用 `will-change` 提前告知浏览器元素即将变化，让浏览器预优化；\n- css\n\n```css\n.box { will-change: transform; }\n```\n\n- 启用 GPU 加速：`transform: translateZ(0)`（创建层叠上下文，交由 GPU 渲染）；\n- 减少深层嵌套：嵌套越深，回流范围越大；\n- 懒加载非首屏元素：延迟渲染不在视口内的元素。";export{n as default};
