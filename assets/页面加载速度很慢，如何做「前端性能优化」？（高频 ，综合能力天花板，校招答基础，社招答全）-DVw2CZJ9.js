const n=`### 页面加载速度很慢，如何做「前端性能优化」？（高频 ，综合能力天花板，校招答基础，社招答全）

答：这是大厂**综合能力核心考题**，能体现候选人的项目经验和工程化思维，**标准答案：按「网络层面」+「资源层面 」+「代码层面优化」+「渲染层面」** 分类回答，结构清晰，答出越多越好，以下是必答的核心优化点： 

#### 一、网络层面 性能优化（首屏慢 / 加载慢的核心优化，最核心维度，必答全）

核心目标：**减少网络请求耗时、降低请求体积、规避网络请求阻塞、提升请求效率**，从根源解决页面加载慢的问题，校招 / 社招都是重点考察项

1. 减少 HTTP 请求数量
	- 合并静态资源：把多个 CSS 文件合并为 1 个、多个 JS 文件合并为 1 个，减少 TCP 三次握手 / 四次挥手的请求开销；小图标合并成雪碧图（CSS Sprite），减少图片请求数。
	- 采用内联资源：页面核心的少量 CSS/JS 代码直接内联到 HTML 中（如首屏样式），避免发起额外的资源请求，提升首屏渲染速度。

2. 降低网络请求体积
	- 资源压缩：所有资源上线前做压缩，JS/CSS 开启代码压缩（去除空格、注释、变量名混淆）；图片做无损压缩（webp/png 压缩），体积可减少 50% 以上，优先使用 webp/avif 格式。
	- 开启 Gzip/Brotli 压缩：后端 /nginx 配置开启，对传输的 HTML/CSS/JS 文件进行压缩，压缩率可达 60%-80%，极大减少传输体积。

3. 优化资源请求方式
	- 静态资源 CDN 分发：将图片、JS、CSS、字体等静态资源部署到 CDN 节点，用户就近访问资源，大幅降低请求的网络时延和带宽消耗。
	- 合理配置 HTTP 缓存策略：强缓存（Cache-Control、Expires）+ 协商缓存（ETag、Last-Modified），让静态资源（图片 / CSS/JS）二次访问时直接从本地缓存读取，无需重新请求服务器。
	- 避免无效请求：接口层面做请求合并、防抖节流，避免高频重复请求；对返回的接口数据做按需请求，不传冗余参数、不返回冗余数据。

4. 资源预加载与预获取
	- 核心资源预加载：对首屏必须的核心资源（如关键 JS、首屏图片）使用 \`<link rel="preload">\` 强制预加载，提升加载优先级。
	- 非核心资源预获取：对用户大概率会访问的资源（如下一页内容、详情页图片）使用 \`<link rel="prefetch">\` 空闲时预加载，不阻塞首屏渲染。

#### 二、资源层面 性能优化（前端工程化核心优化，承上启下，校招答基础，社招答全细节，加分重点）

核心目标：**优化资源的加载策略、体积大小、引用方式**，解决「资源加载时机不合理、资源体积过大、无用资源加载」等问题，和网络层面相辅相成，是面试高频追问点

1. 代码层面资源优化
	- 按需加载（懒加载）：核心优化手段，非首屏资源不加载，用到再加载。包括「路由懒加载」（Vue/React 的路由组件分包加载）、「组件懒加载」（非首屏展示的组件异步引入）、「图片 / 视频懒加载」（可视区域外的资源不加载，滚动到对应位置再加载）。
	- 按需引入第三方库：不全局引入完整 UI 库 / 工具库（如 ElementUI、Antd、lodash），只引入业务需要的组件 / 方法，避免打包体积臃肿；体积过大的第三方库（如 echarts）采用 CDN 外链引入，不打入业务包。
	- 开启 Tree Shaking：打包工具（webpack/vite）开启该功能，自动剔除代码中未被使用的无用代码（死代码），减少打包后的 JS 体积。

2. 打包构建层面优化
	- 分包策略：对打包文件做合理拆分，如「业务代码包」「第三方依赖包」「公共组件包」分开打包，第三方依赖包（vue/react/axios）单独打包并利用缓存，用户二次访问时无需重新加载。
	- 移除打包冗余内容：关闭生产环境的 SourceMap（生产环境无需调试）、剔除代码中的 console.log/debugger，减少打包体积；禁用无用的插件和 loader，提升打包速度同时减少产物体积。
	- 模块替换：体积大的功能模块，用轻量级替代方案，如用 dayjs 替代 moment.js、用 axios-min 版替代完整版 axios。

3. 资源加载顺序优化
	- CSS 放\`<head>\`标签：让样式尽早加载解析，避免页面渲染时出现「样式闪烁（FOUC）」，同时 CSS 加载不会阻塞 DOM 解析，只会阻塞 DOM 渲染。
	- JS 放\`<body>\`底部 / 异步加载：JS 加载和执行会阻塞 DOM 解析和渲染，放底部可避免首屏阻塞；非核心 JS 添加\`async/defer\`属性异步加载，不阻塞页面渲染。

#### 三、渲染层面 性能优化（解决「页面加载完但交互卡、渲染慢、动画掉帧」，校招答基础优化，社招答原理 + 细节，拉开差距的核心加分项）

核心目标：**减少浏览器的重排（回流）和重绘、提升 DOM 渲染效率、降低主线程阻塞、优化动画执行效率**，页面「加载快」的同时做到「渲染快、交互流畅」，面试官最爱追问该维度的原理性问题

1. 减少 DOM 操作，降低重排 / 重绘损耗
	- 重排 (回流)：DOM 结构 / 尺寸 / 位置变化触发，浏览器重新计算布局，**性能消耗极高**；重绘：元素样式（颜色 / 背景）变化触发，不改变布局，性能消耗低。重排一定会触发重绘，重绘不一定触发重排。
	- 优化手段：① 批量操作 DOM，避免频繁增删改查 DOM，可使用 DocumentFragment 文档碎片暂存 DOM 节点，一次性插入页面；② 避免频繁读取会触发重排的属性（offsetTop/offsetWidth/clientHeight），读取后缓存结果；③ 给频繁操作的 DOM 元素设置\`display:none\`，操作完成后再显示，只触发 1 次重排。

2. 优化渲染优先级与主线程阻塞
	- 首屏优先渲染：优先加载和渲染首屏核心内容（如页面主体、核心文案），非首屏内容（侧边栏、底部信息）延迟渲染，让用户快速看到页面核心内容，提升「感知加载速度」。
	- 避免长任务阻塞主线程：JS 的长耗时任务（如大数据循环、复杂计算）会阻塞浏览器的渲染和交互，可拆分为多个微任务（Promise）或放到 Web Worker 中执行，不占用主线程，保证页面流畅。

3. 动画与视觉效果性能优化
	- 高性能属性做动画：**所有动画优先使用 transform 和 opacity 属性实现**，这两个属性不会触发重排和重绘，只会触发浏览器「合成层」的更新，性能损耗极低；严禁使用 width/height/top/left 做动画，会频繁触发重排。
	- 开启硬件加速：对需要做动画的元素，通过\`transform: translateZ(0)\`或\`will-change: transform\`开启硬件加速，浏览器会为元素创建独立的合成层，提升动画流畅度。

4. 布局与样式层面渲染优化
	- 简化 CSS 选择器：CSS 选择器是「从右到左」解析，嵌套层级越深、选择器越复杂，解析耗时越长，建议 CSS 选择器嵌套不超过 3 层，避免使用通配符 *。
	- 减少回流的样式修改：合并多个样式修改为一次，如\`element.style.cssText = 'width:200px;height:200px;background:red'\`，而非单独设置每个样式。
	- 骨架屏 / 加载占位：首屏加载时展示骨架屏，替代空白页面，既优化用户的视觉体验，也能避免用户感知到「页面加载慢」。

---

#### ✅ 补充：校招 / 社招答题侧重点（精准适配，不丢分）

##### ✅ 校招答题要求（答这些即可拿满基础分，约 80% 分值）

只需答三大维度的**核心基础点**，不用讲原理，简洁明了：

> 页面加载慢的前端性能优化主要分 3 方面：① 网络层面：开启 CDN、配置缓存、压缩资源、合并请求；② 资源层面：做路由和图片的懒加载、按需引入第三方库、剔除无用代码；③ 渲染层面：减少频繁 DOM 操作、用 transform 做动画、优先渲染首屏内容。

##### ✅ 社招答题要求（答全上述内容 + 补充原理，拿满分，拉开差距）

在上述三大维度的基础上，每一点补充**1 句原理 / 细节**即可，比如：网络层面开启 Gzip 压缩减少传输体积，资源层面 Tree Shaking 剔除死代码，渲染层面避免触发重排重绘，transform 做动画不会阻塞主线程。

---

#### ✅ 加分拓展（面试官追问必答，社招提分关键，一句即可）

1. 性能检测工具：使用 Chrome 的 Lighthouse、Performance 面板，可精准定位页面的性能瓶颈（如慢请求、长任务、重排频繁等），针对性优化；

2. 首屏性能指标：核心关注「首屏加载时间、白屏时间、DOMContentLoaded 时间」，是衡量页面加载性能的核心指标；

3. 服务端辅助优化：采用 SSR 服务端渲染 / SSG 静态站点生成，解决 SPA 单页应用首屏加载慢的问题，首屏直接返回渲染好的 HTML，无需等待 JS 加载执行。

\`\`\``;export{n as default};
