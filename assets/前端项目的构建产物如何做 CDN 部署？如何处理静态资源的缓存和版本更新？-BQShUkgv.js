const t="### 26. 前端项目的构建产物如何做 CDN 部署？如何处理静态资源的缓存和版本更新？\n	**答：**\n	#### 一、CDN 部署核心步骤\n	1. **构建产物适配 CDN**：\n		- Vite 配置：\n		```javascript\n// vite.config.tsexport default defineConfig({base: 'https://cdn.example.com/my-app/', // CDN 基础路径build: {assetsDir: 'assets', // 静态资源目录rollupOptions: {output: {// 静态资源添加哈希后缀assetFileNames: 'assets/[name].[hash].[ext]',chunkFileNames: 'js/[name].[hash].js',entryFileNames: 'js/[name].[hash].js'}}}})\n````\n\n````\n	- Webpack 配置：\n	```javascript\n````\n\nmodule.exports = {output: {publicPath: '[https://cdn.example.com/my-app/'](https://cdn.example.com/my-app/'), // CDN 基础路径 filename: 'js/[name].[contenthash].js', // 内容哈希 assetModuleFilename: 'assets/[name].[contenthash][ext]'}}\n\n```\n	2. **上传产物到 CDN**：\n		- 手动上传：将 `dist` 目录上传到 CDN 控制台；\n		- 自动化上传：通过 CI/CD 脚本（如 `oss-util`、`cos-cli`）上传到阿里云 OSS / 腾讯云 COS 等 CDN 源站；\n		- 配置 CDN 加速域名，指向源站地址。\n	#### 二、静态资源缓存与版本更新策略\n	##### 1. 缓存策略（HTTP 响应头）\n		##### 2. 版本更新方案（核心：内容哈希）\n	- **哈希后缀**：构建时为 JS/CSS/ 图片添加 `[contenthash]` 后缀（如 `app.123abc.js`），内容变更则哈希变更；\n	- **HTML 不缓存**：确保用户每次访问都获取最新 HTML，HTML 中引用的静态资源路径带哈希，触发 CDN 拉取最新版本；\n	- **强制刷新**：特殊场景下，通过 URL 参数（如 `index.html?v=2.0`）强制刷新 HTML。\n	##### 3. 缓存失效处理\n	- **增量发布**：仅上传变更的文件（带新哈希），未变更文件复用 CDN 缓存；\n	- **CDN 刷新**：通过 CDN 控制台 / API 刷新指定文件 / 目录的缓存（如上线新功能时刷新 HTML）；\n	- **回滚方案**：保留历史版本的产物，出现问题时切换 HTML 中的资源路径到旧版本哈希。\n	#### 三、最佳实践\n	1. **分离静态资源**：将图片 / 字体等静态资源单独部署到 CDN，JS/CSS 随业务包部署；\n	2. **预加载关键资源**：使用 `<link rel=\"preload\">` 预加载核心 JS/CSS，提升首屏速度；\n	3. **监控 CDN 命中率**：确保缓存策略生效（目标命中率 > 95%）；\n	4. **跨域配置**：CDN 配置 `Access-Control-Allow-Origin`，支持跨域加载资源。";export{t as default};
