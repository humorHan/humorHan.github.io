const n=`### 4. 什么是闭包？形成条件？核心用途？闭包导致的内存泄漏如何规避？

**答案**：

#### 定义：

闭包是指有权访问另一个函数作用域中变量的函数（本质是函数作用域的保留），简单说：**内层函数引用外层函数的变量，且内层函数被外部访问，导致外层函数的作用域不会被销毁**。

#### 形成条件：

1. 存在嵌套函数（内层函数 + 外层函数）；
2. 内层函数引用外层函数的变量 / 参数；
3. 内层函数被外层函数外部调用（如返回内层函数、赋值给全局变量）。

#### 核心用途：

1. **私有化变量**：隐藏变量，避免全局污染（如模块化的基础）；
2. **保存状态**：保留函数执行上下文，持续访问外层变量（如计数器、防抖 / 节流函数）；
3. **柯里化 / 偏函数**：实现函数参数复用。

#### 示例（计数器）：

js

\`\`\`javascript
function createCounter() {let count = 0; // 私有化变量，外部无法直接访问return function() {
    count++;return count;};}const counter = createCounter();console.log(counter()); // 1console.log(counter()); // 2（count状态被保存）
\`\`\`

#### 闭包内存泄漏规避：

- **及时释放引用**：使用完闭包后，将其赋值为 \`null\`，切断引用链；
- js

\`\`\`javascript
let counter = createCounter();
counter = null; // 释放闭包引用，GC可回收count变量
\`\`\`

- **避免滥用闭包**：无需保存状态时，不使用闭包；
- **避免引用 DOM 元素**：闭包中若引用 DOM 元素，DOM 销毁前需清空引用；
- **严格模式（use strict）**：减少意外的全局变量（全局变量不会被 GC 回收）。`;export{n as default};
